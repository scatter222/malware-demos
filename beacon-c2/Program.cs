using Microsoft.Extensions.Logging;

namespace beacon_c2
{
    public class Program
    {
        public static void Main(string[] args)
        {
            var builder = WebApplication.CreateBuilder(args);
            using ILoggerFactory factory = LoggerFactory.Create(builder => builder.AddConsole());
            ILogger logger = factory.CreateLogger("Program");

            var app = builder.Build();

            app.MapGet("/beacon", async (HttpContext httpContext) =>
            {
                logger.LogInformation("Beacon hit");

                httpContext.Response.StatusCode = 200;
                await httpContext.Response.CompleteAsync();
            });

            app.Run();
        }
    }
}